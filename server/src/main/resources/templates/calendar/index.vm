#parse("/templates/layout.vm")
#set( $css_name = "calendar" )
#set( $javascript = "<script src='/js/modernizr.js'></script><script src='/js/main.js'></script><script src='/js/graph.js'></script>")
#@mainContent($css_name, $javascript)
<html lang="en" class="no-js">
<div class="topnav">
    <a class="active" href="#home">CALENDUE</a>
    <div class="search-container">
        <form action="/action_page.php">
          <input type="text" placeholder="Search Class..." name="search">
          <button type="submit"><i class="fa fa-search"></i></button>
        </form>
    </div>
</div>

<h2>November 12-18</h2>
<div class="cd-schedule loading">
	<div class="timeline">
		<ul>
			<li><span>09:00</span></li>
			<li><span>09:30</span></li>
			<li><span>10:00</span></li>
			<li><span>10:30</span></li>
			<li><span>11:00</span></li>
			<li><span>11:30</span></li>
			<li><span>12:00</span></li>
			<li><span>12:30</span></li>
			<li><span>1:00</span></li>
			<li><span>1:30</span></li>
			<li><span>2:00</span></li>
			<li><span>2:30</span></li>
			<li><span>3:00</span></li>
			<li><span>3:30</span></li>
			<li><span>4:00</span></li>
			<li><span>4:30</span></li>
			<li><span>5:00</span></li>
			<li><span>5:30</span></li>
			<li><span>6:00</span></li>
		</ul>
	</div> <!-- .timeline -->

	<div class="events">
		<ul>
			<li class="events-group">
				<div class="top-info"><span>Monday</span></div>

				<ul>
					<li class="single-event" data-start="09:30" data-end="10:30" data-content="event-assignment" data-event="event-1">
						<a href="#0">
							<em class="event-name">Class</em>
						</a>
					</li>
				</ul>
			</li>

			<li class="events-group">
				<div class="top-info"><span>Tuesday</span></div>

				<ul>

					<li class="single-event" data-start="13:30" data-end="15:00" data-content="event-assignment" data-event="event-1">
						<a href="#0">
							<em class="event-name">Class</em>
						</a>
					</li>

				</ul>
			</li>

			<li class="events-group">
				<div class="top-info"><span>Wednesday</span></div>

				<ul>
					<li class="single-event" data-start="09:00" data-end="10:15" data-content="event-assignment" data-event="event-1">
						<a href="#0">
							<em class="event-name">Class</em>
						</a>
					</li>

				</ul>
			</li>

			<li class="events-group">
				<div class="top-info"><span>Thursday</span></div>

				<ul>
					<li class="single-event" data-start="09:30" data-end="10:30" data-content="event-assignment" data-event="event-1">
						<a href="#0">
							<em class="event-name">Class</em>
						</a>
					</li>


					<li class="single-event" data-start="15:30" data-end="16:30" data-content="event-assignment" data-event="event-1">
						<a href="#0">
							<em class="event-name">Class</em>
						</a>
					</li>

				</ul>
			</li>

			<li class="events-group">
				<div class="top-info"><span>Friday</span></div>

				<ul>

					<li class="single-event" data-start="12:30" data-end="14:00" data-content="event-assignment" data-event="event-1">
						<a href="#0">
							<em class="event-name">Class</em>
						</a>
					</li>

				</ul>
			</li>
		</ul>
	</div>

	<div class="event-modal">
		<header class="header">
			<div class="content">
				<span class="event-date"></span>
				<h3 class="event-name"></h3>
			</div>

			<div class="header-bg"></div>
		</header>

		<div class="body">
			<div class="event-info"></div>
			<div class="body-bg"></div>
		</div>

		<a href="#0" class="close">Close</a>
	</div>

	<div class="cover-layer"></div>
</div> <!-- .cd-schedule -->
<div class="event-info">
<h2>Assignment Details</h2>
<h3>Assignment 1</h3>
<div id="myDiv"></div>
<div class="stat">
    <p id="average"></p>
</div>
<div class="stat">
    <p id="percentile"></p>
</div>
<div class="stat">
    <p id="toc"></p>
</div>
<br>
<div class="stat">
    <p id="rec"></p>
</div>
<br>
<h2>Assignments Overview</h2>
<div id='classCompareDiv'></div>
<div class='stat'>
    <p id='variation'></p>
</div>
<div id='classScoresDistributionDiv'></div>
</div>

<script>
// function to get average of an array
function getAverage(array) {
    var sum = 0, avg = 0; // sum and average variables
    for(var i = 0; i < array.length; i++) { // add each element of array to sum
        sum += array[i]
    }
    avg = (sum / array.length).toFixed(2); // round average to 2 decimal places
    return avg;
}
// Assignment score histogram graph
var x = [15, 25, 25, 30, 30, 30, 32.5, 35, 35, 35, 37.5, 37.5, 40, 40, 40, 40, 40, 45, 45, 45, 45, 45, 47.5, 47.5, 47.5, 50, 50];
avg = getAverage(x);
var mean = "Average: " + avg.toString() + "     ";
var percentile = "Percentile: 80";
var toc = "Avg Completion Time: 3.5 hours";
var rec = "Estimated Completion Time: 4.5 hours";
var trace = {
    x: x,
    type: 'histogram',
  };
var assignmentData = [trace];
var layout = {
    bargap: 0.1,
    xaxis: {
        range: [0, 50]
    }
}

// Class comparison graph
var assignments = ['Assignment 1', 'Assignment 2', 'Assignment 3']; // all assignments for a class
var userScores = [76, 85, 80]; // user's scores
var classAvgScores = [75.23, 82.13, 84.45]; // class average scores
var diff = []; // difference from mean
var variation; // average deviation from mean
for(var i = 0; i < userScores.length; i++) {
    diff.push(userScores[i] - classAvgScores[i]);
}
variation = "Average Deviation from Mean: " + getAverage(diff).toString() + "%";
var userData = {
    x: assignments,
    y: userScores,
    name: 'Your Scores',
    type: 'bar',
    text: userScores.map(String),
    textposition: 'auto'
};
var classData = {
    x: assignments,
    y: classAvgScores,
    name: 'Class Scores',
    type: 'bar',
    text: classAvgScores.map(String),
    textposition: 'auto'
};

var classCompareData = [userData, classData];
var classCompareLayout = {barmode: 'group'};

// Class Scores Distribution Graph
var classAssignment1Scores = {
  y: [15, 25, 25, 30, 30, 30, 32.5, 35, 35, 35, 37.5, 37.5, 40, 40, 40, 40, 40, 45, 45, 45, 45, 45, 47.5, 47.5, 47.5, 50, 50],
  name: 'Assignment 1',
  type: 'box',
  marker: {
    color: 'rgb(10,140,208)'
  },
  boxmean: 'sd'
};
var classAssignment2Scores = {
  y: [10, 15, 25, 25, 25, 30, 32.5, 32.5, 37.5, 35, 37.5, 37.5, 42.5, 42.5, 40, 40, 40, 45, 47.5, 47.5, 45, 45, 47.5, 47.5, 47.5, 47.5, 50],
  name: 'Assignment 2',
  type: 'box',
  marker: {
    color: 'rgb(100,80,230)'
  },
  boxmean: 'sd'
};
var classAssignment3Scores = {
  y: [20, 20, 20, 20, 20, 30, 32.5, 35, 35, 35, 37.5, 37.5, 40, 40, 42.5, 42.5, 42.5, 45, 45, 45, 50, 50, 50, 50, 50, 50, 50],
  name: 'Assignment 3',
  type: 'box',
  marker: {
    color: 'rgb(190,100,70)'
  },
  boxmean: 'sd'
};

var classAssignmentsData = [classAssignment1Scores, classAssignment2Scores, classAssignment3Scores];

var classAssignmentScoresLayout = {
  title: 'Class Scores By Assignment Distribution'
};

Plotly.newPlot('myDiv', assignmentData, layout);
document.getElementById('average').innerHTML = mean;
document.getElementById('percentile').innerHTML = percentile;
document.getElementById('toc').innerHTML = toc;
document.getElementById('rec').innerHTML = rec;

Plotly.newPlot('classCompareDiv', classCompareData, classCompareLayout);
document.getElementById('variation').innerHTML = variation;

Plotly.newPlot('classScoresDistributionDiv', classAssignmentsData, classAssignmentScoresLayout);

</script>
#end